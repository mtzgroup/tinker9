cmake_minimum_required (VERSION 3.12)


# Generated by the shell command "LC_COLLATE=C ls -1a *.cpp"
set (__T9_CPP_SRC
analyze_x.cpp
bar_x.cpp
box.cpp
cflux.cpp
compilers.cpp
couple.cpp
dynamic_x.cpp
eangle.cpp
eangtor.cpp
ebond.cpp
echarge.cpp
echglj.cpp
echgtrn.cpp
edisp.cpp
egeom.cpp
eimprop.cpp
eimptor.cpp
elec.cpp
emplar.cpp
empole.cpp
empole_chgpen.cpp
energy.cpp
energy_buffer.cpp
eopbend.cpp
epitors.cpp
epolar.cpp
epolar_chgpen.cpp
erepel.cpp
error_nix.cpp
error_prterr.cpp
estrbnd.cpp
estrtor.cpp
etors.cpp
etortor.cpp
eurey.cpp
evalence.cpp
evdw.cpp
exec.cpp
field.cpp
field_chgpen.cpp
group.cpp
induce.cpp
induce_donly.cpp
initial.cpp
io_fort_str.cpp
io_text.cpp
lf_lpiston.cpp
lpiston.cpp
mdegv.cpp
mdintg.cpp
mdintg_respa.cpp
mdintg_verlet.cpp
mdpq.cpp
mdpt.cpp
mdsave.cpp
mechanic2.cpp
minimize_x.cpp
mod.cpp
molecule.cpp
moments.cpp
nblist.cpp
nose.cpp
osrw.cpp
platform.cpp
pme.cpp
pmestuf.cpp
potent.cpp
random.cpp
rattle.cpp
rc_man.cpp
spatial.cpp
spatial2.cpp
switch.cpp
testgrad_x.cpp
tinker_rt.cpp
tinker_suppl.cpp
trimatexp.cpp
tinker9_c_function_wrapper.cpp
)
if (HOST)
   list (APPEND __T9_CPP_SRC
host/darray.cpp
host/execq.cpp
host/fft.cpp
host/gpu_card.cpp
   )
else ()
   list (APPEND __T9_CPP_SRC
cudart/darray.cpp
cudart/error.cpp
cudart/execq.cpp
cudart/fft.cpp
cudart/gpu_card.cpp
cudart/thrust_cache.cpp
   )
endif ()
add_library (tinker9_cpp OBJECT "${__T9_CPP_SRC}")


add_library (tinker9_version OBJECT
   info_x.cc
   promo.cc
)
target_link_libraries (tinker9_version PUBLIC tinker9_cpp)


# macro
target_compile_definitions (tinker9_cpp PUBLIC ${T9_DEFS})
if (__T9_GIT_SHA1)
   target_compile_definitions (tinker9_version PRIVATE
      TINKER9_GIT_SHORT_HASH=${__T9_GIT_SHA1})
endif()
if (__T9_GIT_DATE)
   target_compile_definitions (tinker9_version PRIVATE
      TINKER9_GIT_DATE="${__T9_GIT_DATE}")
endif ()
# include
if (HOST)
else ()
   target_include_directories (tinker9_cpp PUBLIC "${CUDA_DIR}/include")
endif ()
target_include_directories (tinker9_cpp     PUBLIC  "${PROJECT_SOURCE_DIR}/include")
target_include_directories (tinker9_cpp     PRIVATE "${PROJECT_SOURCE_DIR}/include/syntax/acc")
target_include_directories (tinker9_version PRIVATE "${PROJECT_SOURCE_DIR}/include/syntax/acc")
# lib
target_link_libraries (tinker9_cpp PUBLIC tinkerFToCpp)
# FFTW
if (HOST)
   target_include_directories (tinker9_cpp SYSTEM PUBLIC "${FFTW_DIR}/include")
   target_link_libraries (tinker9_cpp PUBLIC t9_lfftw t9_lfftw_threads)
else ()
endif ()
